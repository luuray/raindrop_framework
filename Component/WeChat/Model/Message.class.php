<?php/** * Raindrop Framework for PHP * * MessageBase of WeChat Component * * @author Luuray * @copyright Rainhan System * @id $Id$ * * Copyright (c) 2010-2016, Rainhan System * Site: raindrop-php.rainhan.net */namespace Raindrop\Component\WeChat\Model;use Raindrop\Exceptions\NotImplementedException;abstract class Message{	protected $_aMeta = [];	/**	 * Message constructor.	 *	 * @param string $sFromUser	 * @param string $sToUser	 * @param int $iCreateTime	 * @param int $iMsgId	 * @param null|mixed $mData	 */	public final function __construct($sFromUser, $sToUser, $iCreateTime, $iMsgId, $mData=null)	{		$this->_aMeta = [			'FromUserName' => $sFromUser,			'ToUserName'   => $sToUser,			'CreateTime'   => $iCreateTime,			'MsgId'        => $iMsgId		];		$this->_initialize($mData);	}	protected abstract function _initialize($mData=null);	public abstract function toString();	public final function getType()	{		$sCls = explode('\\', get_class($this));		return array_pop($sCls);	}	public final function getSender()	{		return $this->_aMeta['FromUserName'];	}	public final function getReceiver()	{		return $this->_aMeta['ToUserName'];	}	public final function getCreateTime()	{		return $this->_aMeta['CreateTime'];	}	public final function getMsgId()	{		return isset($this->_aMeta['MsgId'])?$this->_aMeta['MsgId']:null;	}	public final function __get($sKey)	{		if(property_exists($this, $sKey)){			return $this->$sKey;		}		else if(method_exists($this, 'get'.$sKey)){			$sMethod = 'get'.$sKey;			return $this->$sMethod();		}		else{			return null;		}	}	public final function __set($sKey, $mValue)	{		throw new NotImplementedException();	}	public final function __toString()	{		return $this->toString();	}}